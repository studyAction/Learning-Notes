### 工厂模式

#### 1. 简单工厂模式

##### 定义

简单工厂模式（Simple Factory Pattern）又叫作静态工厂方法模式（Static Factory MethodPattern），简单来说，**简单工厂模式有一个具体的工厂类，可以生成多个不同的产品**，属于创建型设计模式。

##### 应用场景

对于产品种类相对较少的情况，考虑使用简单工厂模式可以很方便地创建所需产品。

##### UML类图

![image-20210523000930335](D:\文档\document\assets\image-20210523000930335.png)

##### 核心角色

（1）简单工厂（SimpleFactory）：是简单工厂模式的核心，负责实现创建所有实例的内部逻辑。工厂类的创建产品类的方法可以被外界直接调用，创建所需的产品对象。

（2）抽象产品（IProduct）：是简单工厂创建的所有对象的父类，负责描述所有实例共有的公共接口。

（3）具体产品（ConcreteProduct）：是简单工厂模式的创建目标。

```java
public class Client{
    psvm(){
        new SimpleFactory.makeProduct(1);
    }
}
// 抽象产品
public interface IProduct{
    void doSomething();
}

// 具体产品
static class ProductA implements IProduct {
	public void doSomething() {
        System.out.println("I am product A");
    }
}

static class ProductB implements IProduct {
	public void doSomething() {
        System.out.println("I am product B");
    }
}

static class ProductC implements IProduct {
	public void doSomething() {
        System.out.println("I am product C");
    }
}
static class SimpleFactory{
    public static IProduct makeProduct(int kind) {
        switch(kind) {
            case 0:
				return new ProductA();
            case 1:
				return new ProductB();
            case 2:
				return new ProductC();
        }
        return null;
    }
}
```

Logback源码中的应用

![image-20210523003116443](D:\文档\document\assets\image-20210523003116443.png)

#### 2. 工厂模式

##### 定义

工厂方法模式（Factory Method Pattern）又叫作多态性工厂模式，指定义一个创建对象的接口，但由实现这个接口的类来决定实例化哪个类，工厂方法把类的实例化推迟到子类中进行。

##### 应用场景

（1）创建对象需要大量重复的代码。

（2）客户端（应用层）不依赖产品类实例如何被创建、实现等细节。

（3）一个类通过其子类来指定创建哪个对象。

##### UML类图

![image-20210523132647103](D:\文档\document\assets\image-20210523132647103.png)

##### 核心角色

（1）抽象工厂（IFactory）：是工厂方法模式的核心，与应用程序无关。任何在模式中创建的对象的工厂类必须		实现这个接口。

（2）具体工厂（ConcreteFactory）：是实现抽象工厂接口的具体工厂类，包含与应用程序密切相关的逻辑，并		且被应用程序调用以创建产品对象。

（3）抽象产品（IProduct）：是工厂方法模式所创建的对象的超类型，也就是产品对象的共同父类或共同拥有的		接口。

（4）具体产品（ConcreteProduct）：这个角色实现了抽象产品角色所定义的接口。某具体产品由专门的具体工		厂创建，它们之间往往一一对应。

##### 说明

- 工厂模式来源于普通工厂方法的痛点：**在简单工厂中，随着产品链的丰富，如果每个课程的创建逻辑都有区别，则工厂的职责会变得越来越多，有点像万能工厂，并不便于维护。**

- 满足迪米特法则、依赖倒置原则和里氏替换原则。
- 抽象产品只能生产一种产品，此弊端可使用抽象工厂模式解决

#### 3.抽象工厂模式

数据库连接池代码

### 单例模式

